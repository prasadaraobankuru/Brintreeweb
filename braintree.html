<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>PayPal Auto Launch</title>
    <script src="https://js.braintreegateway.com/web/3.96.0/js/client.min.js"></script>
    <script src="https://js.braintreegateway.com/web/3.96.0/js/paypal-checkout.min.js"></script>
  </head>
  <body>
    <h3>Opening PayPal...</h3>

    <script>
      const authorization = "sandbox_38zsjnr9_ydwkdrfr4jvvhf98"; // your sandbox client token
      const amount = "10.00";
      const currency = "USD";

      braintree.client.create({ authorization }, function (err, clientInstance) {
        if (err) {
          alert("Braintree client failed");
          return;
        }

        braintree.paypalCheckout.create({ client: clientInstance }, function (err, paypalCheckoutInstance) {
          if (err) {
            alert("PayPal init failed");
            return;
          }

          // âœ… Trigger PayPal immediately
          paypalCheckoutInstance.createPayment({
            flow: "checkout",
            amount: amount,
            currency: currency,
          }).then(function (paymentID) {
            paypalCheckoutInstance.startPayment({ paymentID: paymentID });
          }).catch(function (err) {
            alert("Error starting PayPal: " + err.message);
          });
        });
      });
    </script>
  </body>
</html>
